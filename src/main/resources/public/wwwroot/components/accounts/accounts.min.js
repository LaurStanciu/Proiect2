!function(){"use strict";function n(n,t,e,o,i,r,u,a,c){i.accounts=n,i.data=t,i.vm={signIn:{},signUp:{}},i.responses={signIn:{},signUp:{}},i.contents={current:{},edit:{}},i.events={signIn:function(){console.log(i.vm.signIn)},signUp:function(){o.post("/api/sign-up",i.vm.signUp).then(function(n){1==n.data.type&&(r.go("accounts.sign-in"),i.createToasts.toastSuccess()),3==n.data.type&&(console.log(n.data.type),i.createToasts.toastFailed())},function(n){return i.createToasts.toastFailed(),n})}},i.createToasts={toastSuccess:function(){c.create({className:" bg-success text-white",content:"<p>Success!</p>"})},toastWarning:function(n){var t=n;""!==n&&null!==n||(t="Warning");var e="<p>"+t+"</p>";c.create({className:" bg-warning text-white",content:e})},toastFailed:function(){c.create({className:" bg-danger text-white",content:"<p>Failed!</p>"})}}}angular.module("app").controller("accountsCtrl",n),n.$inject=["accounts","data","$location","$http","$scope","$state","$stateParams","ngProgressBar","ngToast"]}(),function(){"use strict";function n(n,t,e,o){var i={identity:{},contents:null},r={identity:function(){var e=t.location.newURL(!0,{api:"api",controller:"accounts",action:"identity"});return n.post(e).then(function(n){return n},function(n){return n})},signOut:function(){var e=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signOut"});return n.post(e).then(function(n){return n},function(n){return n})},signUp:function(e){var o=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signUp"});return n.post(o,e).then(function(n){return n},function(n){return n})},signIn:function(e){var o=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signIn"});return n.post(o,e).then(function(n){return n},function(n){return n})},getContents:function(e,o){var i=$.extend({},{id:0},e),r=$.extend({},{role:null,country:null,language:null},o),u=t.location.newURL(!0,{api:"api",controller:"accounts",id:i.id,segments:["contents"]},r);return n.get(u).then(function(n){return n},function(n){return n})},updateContents:function(e,o,i){var r=$.extend({},{id:0},e),u=$.extend({},{role:null,country:null,language:null},o),a=t.location.newURL(!0,{api:"api",controller:"accounts",id:r.id,segments:["contents"]},u);return n.post(a,i).then(function(n){return n},function(n){return n})}},u={};return u.identity=function(){return i.identity},u.loadIdentity=function(){return r.identity().then(function(n){return 200==n.status&&(i.identity=$.extend(!0,{},n.data)),n})},u.isAuthenticated=function(){return 0!=i.identity.Id&&null!=i.identity.Id},u.signIn=function(n){return r.signOut().then(function(t){return i.identity={},r.signIn(n)}).then(function(n){return n})},u.signUp=function(n){return r.signOut().then(function(t){return r.signUp(n)}).then(function(n){return n})},u.signOut=function(){return r.signOut().then(function(n){return i.identity={},n}).then(function(){setTimeout(function(){window.location.reload(!1)},100)})},u.sref=function(n){var t=$.extend(!0,{},{state:"sign-in"},n),i=e.search().returnState,r=e.search().returnStateParams;i=i?i:encodeURIComponent(o.current.name),r=r?r:encodeURIComponent(JSON.stringify(o.params)),o.go(t.state,{returnState:i,returnStateParams:r},{reload:!0,notify:!0})},u.getContents=function(n,t){return r.getContents(n,t).then(function(n){return n})},u.updateContents=function(n,t,e){return r.updateContents(n,t,e).then(function(n){return n})},u.load=function(n){if(n||null==i.identity.Id)return u.loadIdentity()},u}angular.module("app").factory("accounts",n),n.$inject=["$http","data","$location","$state"]}();