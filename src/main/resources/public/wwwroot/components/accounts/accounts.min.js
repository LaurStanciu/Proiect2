!function(){"use strict";function n(n,t,e,i,o,r,u,c){i.accounts=n,i.data=t,i.vm={signIn:{},signUp:{}},i.responses={signIn:{},signUp:{}},i.contents={current:{},edit:{}},i.events={signIn:function(){console.log(i.vm.signIn)},signUp:function(){console.log(i.vm.signUp)}}}angular.module("app").controller("accountsCtrl",n),n.$inject=["accounts","data","$location","$scope","$state","$stateParams","ngProgressBar","ngToast"]}(),function(){"use strict";function n(n,t,e,i){var o={identity:{},contents:null},r={identity:function(){var e=t.location.newURL(!0,{api:"api",controller:"accounts",action:"identity"});return n.post(e).then(function(n){return n},function(n){return n})},signOut:function(){var e=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signOut"});return n.post(e).then(function(n){return n},function(n){return n})},signUp:function(e){var i=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signUp"});return n.post(i,e).then(function(n){return n},function(n){return n})},signIn:function(e){var i=t.location.newURL(!0,{api:"api",controller:"accounts",action:"signIn"});return n.post(i,e).then(function(n){return n},function(n){return n})},getContents:function(e,i){var o=$.extend({},{id:0},e),r=$.extend({},{role:null,country:null,language:null},i),u=t.location.newURL(!0,{api:"api",controller:"accounts",id:o.id,segments:["contents"]},r);return n.get(u).then(function(n){return n},function(n){return n})},updateContents:function(e,i,o){var r=$.extend({},{id:0},e),u=$.extend({},{role:null,country:null,language:null},i),c=t.location.newURL(!0,{api:"api",controller:"accounts",id:r.id,segments:["contents"]},u);return n.post(c,o).then(function(n){return n},function(n){return n})}},u={};return u.identity=function(){return o.identity},u.loadIdentity=function(){return r.identity().then(function(n){return 200==n.status&&(o.identity=$.extend(!0,{},n.data)),n})},u.isAuthenticated=function(){return 0!=o.identity.Id&&null!=o.identity.Id},u.signIn=function(n){return r.signOut().then(function(t){return o.identity={},r.signIn(n)}).then(function(n){return n})},u.signUp=function(n){return r.signOut().then(function(t){return r.signUp(n)}).then(function(n){return n})},u.signOut=function(){return r.signOut().then(function(n){return o.identity={},n}).then(function(){setTimeout(function(){window.location.reload(!1)},100)})},u.sref=function(n){var t=$.extend(!0,{},{state:"sign-in"},n),o=e.search().returnState,r=e.search().returnStateParams;o=o?o:encodeURIComponent(i.current.name),r=r?r:encodeURIComponent(JSON.stringify(i.params)),i.go(t.state,{returnState:o,returnStateParams:r},{reload:!0,notify:!0})},u.getContents=function(n,t){return r.getContents(n,t).then(function(n){return n})},u.updateContents=function(n,t,e){return r.updateContents(n,t,e).then(function(n){return n})},u.load=function(n){if(n||null==o.identity.Id)return u.loadIdentity()},u}angular.module("app").factory("accounts",n),n.$inject=["$http","data","$location","$state"]}();