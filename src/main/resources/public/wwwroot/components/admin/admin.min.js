!function(){"use strict";function t(t,e,n,a,s,o,r,i,c){n.vm={Type:1,Settings:{dbProvider:"",server:"",endpoints:[]}},n.default=!1,n.currentSelection="",n.dbProviders=[],a.get("/api/InitPage").then(function(t){200===t.status&&(n.dbProviders=t.data,n.vm.Settings.dbProvider=n.dbProviders[0])},function(t){return t}),n.createToasts={toastSuccess:function(){i.create({className:" bg-success text-white",content:"<p>Success!</p>"})},toastWarning:function(t){var e=t;""!==t&&null!==t||(e="Warning");var n="<p>"+e+"</p>";i.create({className:" bg-warning text-white",content:n})},toastFailed:function(){i.create({className:" bg-danger text-white",content:"<p>Failed!</p>"})}},n.reset=function(){n._config.$setPristine(),n.vm.Settings={endpoints:[]},n.vm.Settings.dbProvider=n.dbProviders[0]},n.submitDialog=function(){var t="You have work in progress!",e="";return e=n.default?"Do you want to use default settings?":"Do you want to lose current progress?",c.openConfirm({template:"                    <h4>"+t+"</h4>                    <h6>"+e+'</h6></br>                    <div class="ngdialog-buttons">                        <button class="ngdialog-button ngdialog-button-primary" name="yesButton" ng-click="confirm()">Yes</button>                        <button class="ngdialog-button ngdialog-button-secondary" name="cancelButton" ng-click="closeThisDialog()">Cancel</button>                    </div>',plain:!0,className:"ngdialog-theme-plain",closeByDocument:!1,showClose:!1})},n.services={postData:function(){n.progressbar=r.createInstance(),n.progressbar.start(),a.post("/api/InitPage",n.vm).then(function(t){1===t.data.Type?(n.createToasts.toastSuccess(),n.reset()):2===t.data.Type?(n.createToasts.toastWarning(t.data.Text),n.reset()):n.createToasts.toastFailed()},function(t){return n.createToasts.toastFailed(),t}),n.progressbar.complete()}},n.events={output:function(){if(n.default&&(n.vm.Type=0),n._config.$dirty&&n.default){var t=n.submitDialog();t.then(function(){n.services.postData(),n.default=!1},function(){n.vm.Type=1,n.default=!1})}else n.services.postData()}}}angular.module("app",["ngDialog"]).controller("adminCtrl",t),t.$inject=["accounts","data","$scope","$http","$state","$stateParams","ngProgressBar","ngToast","ngDialog"]}();